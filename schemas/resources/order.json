{
    "parameters": [
        {
            "name": "operation",
            "meta": {
                "displayName": "Operation",
                "displayType": "select",
                "placeholder": "Select an operation",
                "description": "Select the operation you want to perform.",
                "options": [
                    {
                        "label": "Create Order",
                        "value": "order.createOrder",
                        "description": "Create an order to generate an order ID for capturing a payment."
                    },
                    {
                        "label": "Get All Orders",
                        "value": "order.getOrders",
                        "description": "Get a list of orders with optional filters (from, to, receipt)."
                    },
                    {
                        "label": "Get Order Details By ID",
                        "value": "order.getOrderByOrderId",
                        "description": "Get order details using the order ID."
                    },
                    {
                        "label": "Get All Payments Related To An Order",
                        "value": "order.getPaymentsByOrderId",
                        "description": "Get payments associated with an order using the order ID."
                    }
                ],
                "validation": {
                    "required": true
                },
                "dependencies": {
                    "conditions": [
                        {
                            "field": "resource",
                            "operator": "EQUALS",
                            "value": "order"
                        }
                    ]
                }
            }
        }
    ],
    "createOrder": {
        "definition": {
            "method": "POST",
            "url": "https://api.razorpay.com/v1/orders",
            "headers": {
                "Content-Type": "application/json",
                "Authorization": "Basic convertBufferBase64String({{secrets.client_id}}:{{secrets.client_secret}})"
            },
            "body": "{{parameters}}",
            "transform": {
                "body": "const clean = v => (v === undefined || v === null || v === '' || v === 'undefined' || v === 'null') ? undefined : v; const out = {}; const amount = clean(body.amount); if (amount !== undefined) out.amount = amount; const currency = clean(body.currency); if (currency !== undefined) out.currency = currency; const receipt = clean(body.receipt); if (receipt !== undefined) out.receipt = receipt; const notesRaw = body.notes && typeof body.notes === 'object' ? body.notes : undefined; if (notesRaw) { const notes = {}; Object.keys(notesRaw).forEach(k => { const val = clean(notesRaw[k]); if (val !== undefined) notes[k] = val; }); if (Object.keys(notes).length) out.notes = notes; } return out;"
            },
            "response": {
                "output": "{{response.data}}",
                "error": {
                    "message": "{{response.data.error.description}}",
                    "code": "{{response.status}}"
                }
            }
        },
        "parameters": [
            {
                "name": "currency",
                "meta": {
                    "displayName": "Currency",
                    "displayType": "select",
                    "placeholder": "Select a currency",
                    "description": "Select the currency, ISO currency code (for example: INR).",
                    "validation": {
                        "required": true,
                        "requiredDetail": {
                            "errorMsg": "Currency is a required field"
                        }
                    },
                    "htmlProps": {
                        "allowDynamic": true
                    },
                    "options": [
                        {
                            "value": "AED",
                            "label": "United Arab Emirates Dirham"
                        },
                        {
                            "value": "ALL",
                            "label": "Albanian lek"
                        },
                        {
                            "value": "AMD",
                            "label": "Armenian dram"
                        },
                        {
                            "value": "AUD",
                            "label": "Australian dollar"
                        },
                        {
                            "value": "AWG",
                            "label": "Aruban florin"
                        },
                        {
                            "value": "AZN",
                            "label": "Azerbaijan Manat"
                        },
                        {
                            "value": "BAM",
                            "label": "Convertible Mark"
                        },
                        {
                            "value": "BBD",
                            "label": "Barbadian dollar"
                        },
                        {
                            "value": "BDT",
                            "label": "Bangladeshi taka"
                        },
                        {
                            "value": "BGN",
                            "label": "Bulgarian Lev"
                        },
                        {
                            "value": "BHD",
                            "label": "Bahraini Dinar"
                        },
                        {
                            "value": "BIF",
                            "label": "Burundi Franc"
                        },
                        {
                            "value": "BMD",
                            "label": "Bermudian dollar"
                        },
                        {
                            "value": "BND",
                            "label": "Brunei dollar"
                        },
                        {
                            "value": "BOB",
                            "label": "Bolivian boliviano"
                        },
                        {
                            "value": "BRL",
                            "label": "Brazilian Real"
                        },
                        {
                            "value": "BSD",
                            "label": "Bahamian dollar"
                        },
                        {
                            "value": "BTN",
                            "label": "Bhutanese Ngultrum"
                        },
                        {
                            "value": "BWP",
                            "label": "Botswana pula"
                        },
                        {
                            "value": "BZD",
                            "label": "Belize dollar"
                        },
                        {
                            "value": "CAD",
                            "label": "Canadian dollar"
                        },
                        {
                            "value": "CHF",
                            "label": "Swiss franc"
                        },
                        {
                            "value": "CLP",
                            "label": "Chilean Peso"
                        },
                        {
                            "value": "CNY",
                            "label": "Chinese yuan renminbi"
                        },
                        {
                            "value": "COP",
                            "label": "Colombian peso"
                        },
                        {
                            "value": "CRC",
                            "label": "Costa Rican colon"
                        },
                        {
                            "value": "CUP",
                            "label": "Cuban peso"
                        },
                        {
                            "value": "CVE",
                            "label": "Cabo Verde Escudo"
                        },
                        {
                            "value": "CZK",
                            "label": "Czech koruna"
                        },
                        {
                            "value": "DJF",
                            "label": "Djibouti Franc"
                        },
                        {
                            "value": "DKK",
                            "label": "Danish krone"
                        },
                        {
                            "value": "DOP",
                            "label": "Dominican peso"
                        },
                        {
                            "value": "DZD",
                            "label": "Algerian dinar"
                        },
                        {
                            "value": "EGP",
                            "label": "Egyptian pound"
                        },
                        {
                            "value": "ETB",
                            "label": "Ethiopian birr"
                        },
                        {
                            "value": "EUR",
                            "label": "European euro"
                        },
                        {
                            "value": "FJD",
                            "label": "Fijian dollar"
                        },
                        {
                            "value": "GBP",
                            "label": "Pound sterling"
                        },
                        {
                            "value": "GHS",
                            "label": "Ghanian Cedi"
                        },
                        {
                            "value": "GIP",
                            "label": "Gibraltar pound"
                        },
                        {
                            "value": "GMD",
                            "label": "Gambian dalasi"
                        },
                        {
                            "value": "GNF",
                            "label": "Guinean Franc"
                        },
                        {
                            "value": "GTQ",
                            "label": "Guatemalan quetzal"
                        },
                        {
                            "value": "GYD",
                            "label": "Guyanese dollar"
                        },
                        {
                            "value": "HKD",
                            "label": "Hong Kong dollar"
                        },
                        {
                            "value": "HNL",
                            "label": "Honduran lempira"
                        },
                        {
                            "value": "HRK",
                            "label": "Croatian kuna"
                        },
                        {
                            "value": "HTG",
                            "label": "Haitian gourde"
                        },
                        {
                            "value": "HUF",
                            "label": "Hungarian forint"
                        },
                        {
                            "value": "IDR",
                            "label": "Indonesian rupiah"
                        },
                        {
                            "value": "ILS",
                            "label": "Israeli new shekel"
                        },
                        {
                            "value": "INR",
                            "label": "Indian rupee"
                        },
                        {
                            "value": "IQD",
                            "label": "Iraqi Dinar"
                        },
                        {
                            "value": "ISK",
                            "label": "Iceland Krona"
                        },
                        {
                            "value": "JMD",
                            "label": "Jamaican dollar"
                        },
                        {
                            "value": "JOD",
                            "label": "Jordanian Dinar"
                        },
                        {
                            "value": "JPY",
                            "label": "Japanese Yen"
                        },
                        {
                            "value": "KES",
                            "label": "Kenyan shilling"
                        },
                        {
                            "value": "KGS",
                            "label": "Kyrgyzstani som"
                        },
                        {
                            "value": "KHR",
                            "label": "Cambodian riel"
                        },
                        {
                            "value": "KMF",
                            "label": "Comorian Franc"
                        },
                        {
                            "value": "KRW",
                            "label": "Korean Won"
                        },
                        {
                            "value": "KWD",
                            "label": "Kuwaiti Dinar"
                        },
                        {
                            "value": "KYD",
                            "label": "Cayman Islands dollar"
                        },
                        {
                            "value": "KZT",
                            "label": "Kazakhstani tenge"
                        },
                        {
                            "value": "LAK",
                            "label": "Lao kip"
                        },
                        {
                            "value": "LKR",
                            "label": "Sri Lankan rupee"
                        },
                        {
                            "value": "LRD",
                            "label": "Liberian dollar"
                        },
                        {
                            "value": "LSL",
                            "label": "Lesotho loti"
                        },
                        {
                            "value": "MAD",
                            "label": "Moroccan dirham"
                        },
                        {
                            "value": "MDL",
                            "label": "Moldovan leu"
                        },
                        {
                            "value": "MGA",
                            "label": "Malagasy Ariary"
                        },
                        {
                            "value": "MKD",
                            "label": "Macedonian denar"
                        },
                        {
                            "value": "MMK",
                            "label": "Myanmar kyat"
                        },
                        {
                            "value": "MNT",
                            "label": "Mongolian tugrik"
                        },
                        {
                            "value": "MOP",
                            "label": "Macanese pataca"
                        },
                        {
                            "value": "MUR",
                            "label": "Mauritian rupee"
                        },
                        {
                            "value": "MVR",
                            "label": "Maldivian rufiyaa"
                        },
                        {
                            "value": "MWK",
                            "label": "Malawian kwacha"
                        },
                        {
                            "value": "MXN",
                            "label": "Mexican peso"
                        },
                        {
                            "value": "MYR",
                            "label": "Malaysian ringgit"
                        },
                        {
                            "value": "MZN",
                            "label": "Mozambique Metical"
                        },
                        {
                            "value": "NAD",
                            "label": "Namibian dollar"
                        },
                        {
                            "value": "NGN",
                            "label": "Nigerian naira"
                        },
                        {
                            "value": "NIO",
                            "label": "Nicaraguan cordoba"
                        },
                        {
                            "value": "NOK",
                            "label": "Norwegian krone"
                        },
                        {
                            "value": "NPR",
                            "label": "Nepalese rupee"
                        },
                        {
                            "value": "NZD",
                            "label": "New Zealand dollar"
                        },
                        {
                            "value": "OMR",
                            "label": "Rial Omani"
                        },
                        {
                            "value": "PEN",
                            "label": "Peruvian sol"
                        },
                        {
                            "value": "PGK",
                            "label": "Papua New Guinean kina"
                        },
                        {
                            "value": "PHP",
                            "label": "Philippine peso"
                        },
                        {
                            "value": "PKR",
                            "label": "Pakistani rupee"
                        },
                        {
                            "value": "PLN",
                            "label": "Polish Zloty"
                        },
                        {
                            "value": "PYG",
                            "label": "Paraguayan Guarani"
                        },
                        {
                            "value": "QAR",
                            "label": "Qatari riyal"
                        },
                        {
                            "value": "RON",
                            "label": "Romanian Leu"
                        },
                        {
                            "value": "RSD",
                            "label": "Serbian Dinar"
                        },
                        {
                            "value": "RUB",
                            "label": "Russian ruble"
                        },
                        {
                            "value": "RWF",
                            "label": "Rwanda Franc"
                        },
                        {
                            "value": "SAR",
                            "label": "Saudi Arabian riyal"
                        },
                        {
                            "value": "SCR",
                            "label": "Seychellois rupee"
                        },
                        {
                            "value": "SEK",
                            "label": "Swedish krona"
                        },
                        {
                            "value": "SGD",
                            "label": "Singapore dollar"
                        },
                        {
                            "value": "SLL",
                            "label": "Sierra Leonean leone"
                        },
                        {
                            "value": "SOS",
                            "label": "Somali shilling"
                        },
                        {
                            "value": "SVC",
                            "label": "Salvadoran colón"
                        },
                        {
                            "value": "SZL",
                            "label": "Swazi lilangeni"
                        },
                        {
                            "value": "THB",
                            "label": "Thai baht"
                        },
                        {
                            "value": "TND",
                            "label": "Tunisian Dinar"
                        },
                        {
                            "value": "TRY",
                            "label": "Turkish Lira"
                        },
                        {
                            "value": "TTD",
                            "label": "Trinidad and Tobago dollar"
                        },
                        {
                            "value": "TWD",
                            "label": "New Taiwan Dollar"
                        },
                        {
                            "value": "TZS",
                            "label": "Tanzanian shilling"
                        },
                        {
                            "value": "UAH",
                            "label": "Ukrainian Hryvnia"
                        },
                        {
                            "value": "UGX",
                            "label": "Uganda Shilling"
                        },
                        {
                            "value": "USD",
                            "label": "United States dollar"
                        },
                        {
                            "value": "UYU",
                            "label": "Uruguayan peso"
                        },
                        {
                            "value": "UZS",
                            "label": "Uzbekistani so'm"
                        },
                        {
                            "value": "VND",
                            "label": "Vietnamese Dong"
                        },
                        {
                            "value": "VUV",
                            "label": "Vatu"
                        },
                        {
                            "value": "XAF",
                            "label": "CFA Franc BEAC"
                        },
                        {
                            "value": "XCD",
                            "label": "East Caribbean Dollar"
                        },
                        {
                            "value": "XOF",
                            "label": "CFA Franc BCEAO"
                        },
                        {
                            "value": "XPF",
                            "label": "CFP Franc"
                        },
                        {
                            "value": "YER",
                            "label": "Yemeni rial"
                        },
                        {
                            "value": "ZAR",
                            "label": "South African rand"
                        },
                        {
                            "value": "ZMW",
                            "label": "Zambian Kwacha"
                        }
                    ]
                }
            },
            {
                "name": "amount",
                "meta": {
                    "displayName": "Amount",
                    "displayType": "number",
                    "placeholder": "Enter amount (in the smallest unit)",
                    "description": "Amount in the smallest unit of the currency (for example, 100 = ₹1).",
                    "validation": {
                        "required": true
                    }
                }
            },
            {
                "name": "receipt",
                "meta": {
                    "displayName": "Receipt",
                    "displayType": "text",
                    "placeholder": "Enter a receipt reference (for example: rcpt_0001)",
                    "description": "Receipt ID for internal reference for the order (max: 40 characters).",
                    "validation": {
                        "required": false,
                        "max": 40
                    }
                }
            },
            {
                "name": "notes",
                "meta": {
                    "displayName": "Notes",
                    "displayType": "keyvalue",
                    "placeholder": "Enter notes",
                    "description": "Optional key-value notes for the order (up to 15 entries).",
                    "validation": {
                        "max": 15
                    },
                    "children": [
                        {
                            "name": "key",
                            "meta": {
                                "displayType": "text",
                                "displayName": "Key",
                                "validation": {
                                    "required": true
                                }
                            }
                        },
                        {
                            "name": "value",
                            "meta": {
                                "displayType": "text",
                                "displayName": "Value",
                                "validation": {
                                    "required": true
                                }
                            }
                        }
                    ]
                }
            }
        ]
    },
    "getOrders": {
        "parameters": [
            {
                "meta": {
                    "htmlProps": {
                        "format": "YYYY-MM-DD HH:mm:ss",
                        "disabled": false,
                        "timeSteps": {
                            "hours": 1,
                            "minutes": 5,
                            "seconds": 5
                        }
                    },
                    "validation": {
                        "required": false
                    },
                    "description": "Filter orders created after this time.",
                    "displayName": "From",
                    "displayType": "datetime",
                    "placeholder": "Select start date and time"
                },
                "name": "from"
            },
            {
                "meta": {
                    "htmlProps": {
                        "format": "YYYY-MM-DD HH:mm:ss",
                        "disabled": false,
                        "timeSteps": {
                            "hours": 1,
                            "minutes": 5,
                            "seconds": 5
                        }
                    },
                    "validation": {
                        "required": false
                    },
                    "description": "Filter orders created before this time.",
                    "displayName": "To",
                    "displayType": "datetime",
                    "placeholder": "Select end date and time"
                },
                "name": "to"
            },
            {
                "name": "receipt",
                "meta": {
                    "displayName": "Receipt",
                    "displayType": "text",
                    "placeholder": "Enter a receipt value (for example: rcpt_0001)",
                    "description": "Filter orders by receipt (the receipt value set while creating the order).",
                    "validation": {
                        "required": false
                    }
                }
            },
            {
                "name": "authorized",
                "meta": {
                    "displayType": "select",
                    "displayName": "Payment Authorization",
                    "placeholder": "Select payment authorization status",
                    "description": "Filter orders by payment authorization status. For dynamic input, use 1 for authorized payments and 0 for unauthorized payments.",
                    "validation": {
                        "required": false
                    },
                    "options": [
                        {
                            "value": "1",
                            "label": "Authorized Payments"
                        },
                        {
                            "value": "0",
                            "label": "Unauthorized Payments"
                        }
                    ],
                    "htmlProps": {
                        "allowDynamic": true
                    }
                }
            }
        ],
        "definition": {
            "method": "GET",
            "url": "https://api.razorpay.com/v1/orders",
            "qs": {
                "from": "{{parameters.from}}",
                "to": "{{parameters.to}}",
                "receipt": "{{parameters.receipt}}",
                "authorized": "{{parameters.authorized}}"
            },
            "pagination": {
                "type": "offset",
                "default": {
                    "count": 100,
                    "skip": 0
                },
                "qs": {
                    "count": "{{pagination.count}}",
                    "skip": "{{pagination.skip}} + {{response.data.count}}"
                },
                "condition": "{{response.data.count}} >= 0"
            },
            "headers": {
                "Content-Type": "application/json",
                "Authorization": "Basic convertBufferBase64String({{secrets.client_id}}:{{secrets.client_secret}})"
            },
            "transform": {
                "qs": "const params = { ...qs }; const fromRaw = \"{{parameters.from}}\"; const toRaw = \"{{parameters.to}}\"; const authRaw = \"{{parameters.authorized}}\"; const clean = v => v && v !== 'undefined' && v !== 'null' && String(v).trim() !== '' ? String(v).trim() : null; const toUnix = v => { v = clean(v); if (!v) return null; if (/^\\d+$/.test(v)) { const n = parseInt(v, 10); if (isNaN(n)) return null; return v.length >= 13 ? Math.floor(n / 1000) : n; } const ts = new Date(v).getTime(); return isNaN(ts) ? null : Math.floor(ts / 1000); }; const from = toUnix(fromRaw); const to = toUnix(toRaw); if (from != null) params.from = from; else delete params.from; if (to != null) params.to = to; else delete params.to; const auth = clean(authRaw); if (auth != null) { const a = parseInt(auth, 10); if (!isNaN(a)) params.authorized = a; else delete params.authorized; } else { delete params.authorized; } return params;"
            },
            "response": {
                "output": "{{response.data.items}}",
                "error": {
                    "message": "{{response.data.error.description}}",
                    "code": "{{response.status}}"
                }
            }
        }
    },
    "getOrderByOrderId": {
        "parameters": [
            {
                "name": "orderId",
                "meta": {
                    "displayName": "Order ID",
                    "displayType": "text",
                    "placeholder": "Enter an order ID (for example: order_00001)",
                    "description": "Get an order by its ID.",
                    "validation": {
                        "required": true
                    }
                }
            }
        ],
        "definition": {
            "method": "GET",
            "url": "https://api.razorpay.com/v1/orders/",
            "transform": {
                "url": "function transformURL() {\n  var oid = (typeof parameters !== 'undefined' && parameters && parameters.orderId != null)\n    ? parameters.orderId\n    : '{{parameters.orderId}}';\n\n  var orderId = oid;\n\n  if (orderId && typeof orderId === 'object') {\n    orderId = orderId.value || orderId.id || orderId.orderId || (orderId.data && (orderId.data.value || orderId.data.id || orderId.data.orderId));\n  }\n\n  if (typeof orderId === 'string') {\n    var raw = orderId.trim().replace(/^\"|\"$/g, '');\n    if ((raw[0] === '{' && raw[raw.length - 1] === '}') || (raw[0] === '[' && raw[raw.length - 1] === ']')) {\n      try {\n        var obj = JSON.parse(raw);\n        if (Array.isArray(obj)) obj = obj[0];\n        orderId = obj && typeof obj === 'object'\n          ? obj.value || obj.id || obj.orderId || (obj.data && (obj.data.value || obj.data.id || obj.data.orderId)) || raw\n          : raw;\n      } catch (e) {\n        orderId = raw;\n      }\n    } else {\n      orderId = raw;\n    }\n  }\n\n  if (!orderId || orderId === '[object Object]') throw new Error('Invalid orderId');\n\n  return (url.endsWith('/') ? url : url + '/') + encodeURIComponent(String(orderId));\n}\nreturn transformURL();"
            },
            "headers": {
                "Content-Type": "application/json",
                "Authorization": "Basic convertBufferBase64String({{secrets.client_id}}:{{secrets.client_secret}})"
            },
            "response": {
                "output": "{{response.data}}",
                "error": {
                    "message": "{{response.data.error.description}}",
                    "code": "{{response.status}}"
                }
            }
        }
    },
    "getPaymentsByOrderId": {
        "parameters": [
            {
                "name": "orderId",
                "meta": {
                    "displayName": "Order ID",
                    "displayType": "text",
                    "placeholder": "Enter an order ID (for example: order_00001)",
                    "description": "Get payments associated with an order using the order ID.",
                    "validation": {
                        "required": true
                    }
                }
            }
        ],
        "definition": {
            "method": "GET",
            "url": "https://api.razorpay.com/v1/orders/",
            "transform": {
                "url": "function transformURL() {\n  var oid = (typeof parameters !== 'undefined' && parameters && parameters.orderId != null)\n    ? parameters.orderId\n    : '{{parameters.orderId}}';\n\n  var orderId = oid;\n\n  if (orderId && typeof orderId === 'object') {\n    orderId = orderId.value || orderId.id || orderId.orderId || (orderId.data && (orderId.data.value || orderId.data.id || orderId.data.orderId));\n  }\n\n  if (typeof orderId === 'string') {\n    var raw = orderId.trim().replace(/^\"|\"$/g, '');\n    if ((raw[0] === '{' && raw[raw.length - 1] === '}') || (raw[0] === '[' && raw[raw.length - 1] === ']')) {\n      try {\n        var obj = JSON.parse(raw);\n        if (Array.isArray(obj)) obj = obj[0];\n        orderId = obj && typeof obj === 'object'\n          ? obj.value || obj.id || obj.orderId || (obj.data && (obj.data.value || obj.data.id || obj.data.orderId)) || raw\n          : raw;\n      } catch (e) {\n        orderId = raw;\n      }\n    } else {\n      orderId = raw;\n    }\n  }\n\n  if (!orderId || orderId === '[object Object]') throw new Error('Invalid orderId');\n\n  return (url.endsWith('/') ? url : url + '/') + encodeURIComponent(String(orderId)) + '/payments';\n}\nreturn transformURL();"
            },
            "headers": {
                "Content-Type": "application/json",
                "Authorization": "Basic convertBufferBase64String({{secrets.client_id}}:{{secrets.client_secret}})"
            },
            "response": {
                "output": "{{response.data}}",
                "error": {
                    "message": "{{response.data.message}}",
                    "code": "{{response.status}}"
                }
            }
        }
    }
}